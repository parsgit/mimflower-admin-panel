import{r as b,c as d,o as i,b as v,a as e,t as l,k as p,F as S,p as L,w as N,s as U,B as I,z as V,P as k,A as M,m as P,d as f,f as y,u as D}from"./index-BOAq0qJY.js";const E={dir:"rtl"},F={key:0,class:"z-1 fixed top-0 left-0 w-full h-full bg-gray-500/50 backdrop-blur-sm flex items-center justify-center"},T={class:"bg-white p-4 rounded-xl shadow max-w-3xl w-full text-lg"},q={class:"grid grid-cols-2 gap-2"},G={class:"grid grid-cols-1 gap-2 mt-4"},H={class:"flex gap-4"},J={dir:"ltr"},K={class:"flex gap-4"},Q={dir:"ltr"},W={class:"text-center mt-4"},X={key:1,class:"z-1 fixed top-0 left-0 w-full h-full bg-gray-500/50 backdrop-blur-sm flex items-center justify-center"},Y={class:"bg-white p-4 rounded-xl shadow max-w-3xl w-full text-lg"},Z={class:"grid grid-cols-2 gap-2"},ee={class:"grid grid-cols-2 gap-2 mt-4"},te={class:"grid grid-cols-2 gap-2 mt-4"},se={class:"mt-4 flex flex-col gap-2 p-2 bg-gray-100 rounded-xl"},oe={class:"grid grid-cols-2 gap-4"},le={class:"grid grid-cols-2 gap-4"},ne={class:"flex flex-wrap gap-4"},de={class:"mt-4 flex flex-col gap-2 p-2 bg-gray-100 rounded-xl"},ie={class:"text-center mt-4"},ae={class:"mt-4 flex flex-col gap-6"},re={key:0,class:"my-2"},ue={key:1,class:"my-2"},ce={class:"alert alert-error"},_e={class:"flex flex-col md:flex-row justify-between"},ve={class:"flex gap-4 lg:gap-8 lg:flex-row gap-4"},pe={class:"font-bold p-1 rounded-lg"},ge={class:"text-lg"},fe={class:"font-bold p-1 rounded-lg"},he={class:"text-lg"},me={class:"text-lg"},xe={class:"flex flex-col xs:flex-row justify-center md:justify-start items-center gap-4"},be={key:0,class:"flex-1 md:flex-none"},ye=["onUpdate:modelValue","onChange"],we={key:1,class:""},ke=["onUpdate:modelValue","onChange"],$e=["value"],Oe={class:""},Ce=["onClick"],Se={class:""},Le=["onClick"],Ve={class:"flex flex-col gap-4 lg:gap-8 lg:flex-row gap-4"},Ae={class:"font-bold p-1 rounded-xl"},Re={dir:"ltr",class:"text-lg"},je={class:"font-bold p-1 rounded-xl"},Be={dir:"ltr",class:"text-lg"},Ne={class:"font-bold p-1 rounded-xl"},Ue={dir:"ltr",class:"text-lg"},ze={key:0,class:"font-bold p-1 rounded-xl bg-gray-200"},Ie={dir:"ltr",class:"text-lg"},Me={class:"mt-4"},Pe={class:"col-span-14 lg:col-span-8 flex gap-2 flex-col gap-2"},De={class:"font-bold text-xl"},w={__name:"OrderList",props:{orders:{required:!0},customActions:{default:[]}},emits:["changeOrderStatus","reloadList"],setup($,{emit:O}){const _=$,h=O,g=(r,t)=>{t=="cancel"?V({title:"لغو سفارش",text:` سفارش با شناسه ${r} لغو شود؟`,icon:"warning",content:{element:"input",attributes:{placeholder:"دلیل لغو سفارش را وارد کنید",type:"text",dir:"auto",id:"myswalinputreason"}},buttons:{cancel:"انصراف",ok:{text:"تایید و لغو سفارش",value:!0}}}).then(s=>{if(s){const a=document.getElementById("myswalinputreason").value;a.length>0?m(r,t,a):V({title:"خطا",text:"لطفا دلیل لغو سفارش را وارد کنید",icon:"error"}).then(()=>{g(r,t)})}else window.location.reload()}):V({title:"تغییر وضعیت سفارش",text:"آیا از تغییر وضعیت این سفارش اطمینان دارید؟",icon:"info",buttons:{cancel:"خیر/انصراف",ok:{text:"بله",value:!0}},dangerMode:!0}).then(s=>{s&&m(r,t)})},m=(r,t,s="")=>{k("admin/orders/change-status",{order_id:r,order_status:t,reason:s}).then(a=>{a.ok&&h("reloadList")})},n=b({show_box:!1}),x=r=>{c.value={},n.value=r,n.value.show_box=!0},c=b({show_box:!1}),C=r=>{n.value={},c.value=r,c.value.show_box=!0};return(r,t)=>{var s,a;return i(),d("div",E,[c.value.show_box===!0?(i(),d("div",F,[e("div",T,[e("div",q,[e("div",null," نام پرداخت کننده : "+l(c.value.payment_info.payer_name),1),e("div",null," کد پیگیری : "+l(c.value.payment_info.payment_code),1)]),e("div",G,[e("div",H,[t[2]||(t[2]=p(" کارت پرداخت کننده : ")),e("div",J,l(c.value.payment_info.payer_card),1)]),e("div",K,[t[3]||(t[3]=p(" کارت فروشنده : ")),e("div",Q,l(c.value.payment_info.seller_card),1)])]),e("div",W,[e("button",{onClick:t[0]||(t[0]=o=>c.value.show_box=!1),class:"btn btn-primary"},"بستن")])])])):v("",!0),n.value.show_box===!0?(i(),d("div",X,[e("div",Y,[e("div",Z,[e("div",null," نام : "+l(n.value.order_info.name),1),e("div",null," نام خانوادگی : "+l(n.value.order_info.last_name),1)]),e("div",ee,[e("div",null," موبایل : "+l(n.value.order_info.mobile),1),e("div",null," کد پستی : "+l(n.value.order_info.postal_code),1)]),e("div",te,[e("div",null," تاریخ ارسال : "+l(n.value.order_info.send_date),1),e("div",null," زمان ارسال : "+l(n.value.order_info.send_time),1)]),e("div",se,[e("div",oe,[e("div",null,"نام ارسال کننده : "+l((a=(s=n.value)==null?void 0:s.order_info)==null?void 0:a.sender_name),1),e("div",null,"نام دریافت کننده : "+l(n.value.order_info.recipient_name),1)]),e("div",le,[e("div",null," منطقه : "+l(n.value.order_info.district),1),e("div",null," نوع ارسال : "+l(n.value.order_info.posting_type),1)]),e("div",null,"آدرس : "+l(n.value.order_info.address),1),e("div",ne,[e("div",null," پلاک "+l(n.value.order_info.house_number),1),e("div",null," واحد "+l(n.value.order_info.unit),1),t[4]||(t[4]=p(" - ")),e("div",null,l(n.value.order_info.extra_instructions),1)])]),e("div",de,[e("div",null," پیام : "+l(n.value.order_info.message),1)]),e("div",ie,[e("button",{onClick:t[1]||(t[1]=o=>n.value.show_box=!1),class:"btn btn-primary"},"بستن")])])])):v("",!0),e("div",ae,[(i(!0),d(S,null,L($.orders,o=>{var A,R,j,B;return i(),d("div",{key:o.id,class:"shadow shadow-md shadow-green-200 bg-gray-100 border-2 border-gray-400 rounded-md p-2"},[(o==null?void 0:o.confirm_needed)===1?(i(),d("div",re,t[5]||(t[5]=[e("div",{class:"alert alert-info"}," پرداخت به صورت کارت به کارت انجام شده و نیاز است تا اطلاعات پرداخت برسی شود ",-1)]))):v("",!0),(A=o==null?void 0:o.reason)!=null&&A.length?(i(),d("div",ue,[e("div",ce,[t[6]||(t[6]=e("span",{class:"font-bold"},"دلیل لغو سفارش:",-1)),e("span",null,l(o.reason),1)])])):v("",!0),e("div",_e,[e("div",ve,[e("div",pe,[t[7]||(t[7]=e("span",null,"شناسه :",-1)),e("span",ge,l(o.id),1)]),e("div",fe,[t[8]||(t[8]=e("span",null," توسط :",-1)),e("span",he,l(o.user.name),1),e("span",me,l((R=o==null?void 0:o.user)==null?void 0:R.last_name),1)])]),e("div",xe,[((j=_==null?void 0:_.customActions)==null?void 0:j.length)===0?(i(),d("div",be,[N(e("select",{class:"select select-primary font-bold","onUpdate:modelValue":u=>o.order_status=u,onChange:u=>g(o.id,o.order_status)},t[9]||(t[9]=[I('<option value="processing">در حال پردازش</option><option value="procuring">درحال آماده سازی</option><option value="ready_to_ship">آماده ارسال</option><option value="shipped">ارسال شده</option><option value="completed">تکمیل شده</option>',5)]),40,ye),[[U,o.order_status]])])):(i(),d("div",we,[N(e("select",{class:"select select-primary w-full font-bold","onUpdate:modelValue":u=>o.order_status=u,onChange:u=>g(o.id,o.order_status)},[(i(!0),d(S,null,L(_.customActions,(u,z)=>(i(),d("option",{key:z,value:u.value},l(u.title),9,$e))),128))],40,ke),[[U,o.order_status]])])),e("div",Oe,[e("button",{onClick:u=>x(o),class:"btn btn-primary w-full"},"اطلاعات سفارش دهنده",8,Ce)]),e("div",Se,[e("button",{onClick:u=>C(o),class:"btn btn-primary w-full"},"اطلاعات پرداخت",8,Le)])])]),e("div",Ve,[e("div",Ae,[t[10]||(t[10]=p("تاریخ ثبت : ")),e("span",Re,l(o.fa_created_at),1)]),e("div",je,[t[11]||(t[11]=p("تاریخ پرداخت : ")),e("span",Be,l(o.fa_payment_date),1)]),e("div",Ne,[t[12]||(t[12]=e("b",null,"پرداخت شده : ",-1)),e("span",Ue,l(o.cost)+" تومان",1)]),((B=o==null?void 0:o.completed_at)==null?void 0:B.length)>5?(i(),d("div",ze,[t[13]||(t[13]=p("تاریخ تکمیل : ")),e("span",Ie,l(o.completed_at),1)])):v("",!0)]),e("div",Me,[t[15]||(t[15]=e("div",{class:"font-bold text-green-800"},"لیست سفارشات:",-1)),e("div",Pe,[(i(!0),d(S,null,L(o.cart_list,u=>(i(),d("div",{class:"border-2 border-green-800/50 border-dashed bg-gray-50 p-2 rounded-xl text-lg font-bold",key:u.id},[p("🛒 "+l(u.product_title)+" - "+l(u.inventory_name)+" (تعداد : ",1),e("span",De,l(u.count),1),t[14]||(t[14]=p(" ) "))]))),128))])])])}),128))])])}}},Ee={class:""},Fe={dir:"rtl"},Te={class:"tabs tabs-box w-fit"},qe=["checked"],Ge=["checked"],He=["checked"],Je={key:0,class:"bg-gray-200 p-4 rounded shadow shadow-md text-right mt-8"},Ke={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},Qe={key:1,dir:"rtl"},We={key:1,class:"bg-gray-100 p-4 rounded shadow shadow-md text-right mt-10"},Xe={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},Ye={key:1},Ze={key:2,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-8"},et={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},tt={key:1,dir:"rtl"},st={key:3,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-8"},ot={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},lt={key:1,dir:"rtl"},dt={__name:"AdminOrdersView",setup($){const O=D(),_=P(),h=b([]),g=b([]),m=b([]),n=b([]);M.admin_panel_title.value="پنل ادمین - سفارشات";const x=()=>{k("admin/orders/active-list",{}).then(t=>{t.ok&&(h.value=t.list,console.log(h.value),m.value=h.value.filter(s=>s.order_status=="new"),g.value=h.value.filter(s=>s.order_status!="new"&&s.order_status!="completed"))})},c=()=>{k("admin/orders/completed-list",{}).then(t=>{t.ok&&(n.value=t.list,console.log(n.value))})},C=()=>{k("admin/orders/canceled-list",{}).then(t=>{t.ok&&(n.value=t.list,console.log(n.value))})},r=t=>{O.replace({hash:t}),t=="#completed"&&c(),t=="#canceled"?C():x()};return _.hash=="#completed"?c():x(),(t,s)=>(i(),d("div",Ee,[e("div",Fe,[e("div",Te,[e("input",{onClick:s[0]||(s[0]=a=>r("#processing")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"درحال انجام",checked:["","#processing"].indexOf(f(_).hash)>-1},null,8,qe),e("input",{onClick:s[1]||(s[1]=a=>r("#completed")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"انجام شده‌ها",checked:["#completed"].indexOf(f(_).hash)>-1},null,8,Ge),e("input",{onClick:s[2]||(s[2]=a=>r("#canceled")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"لغو شده‌‌ها",checked:["#canceled"].indexOf(f(_).hash)>-1},null,8,He)])]),["#processing",""].indexOf(f(_).hash)>-1?(i(),d("div",Je,[s[7]||(s[7]=e("h2",{class:"text-2xl font-bold"},"لیست سفارشات جدید",-1)),m.value.length==0?(i(),d("div",Ke," سفارش جدیدی وجود ندارد ")):(i(),d("div",Qe,[y(w,{orders:m.value,onReloadList:x,"custom-actions":[{title:"جدید",value:"new"},{title:"تغییر به درحال انجام",value:"processing"},{title:"لغو سفارش",value:"cancel"}],onChangeOrderStatus:s[3]||(s[3]=a=>t.changeOrderStatus(a))},null,8,["orders"])]))])):v("",!0),["#processing",""].indexOf(f(_).hash)>-1?(i(),d("div",We,[s[8]||(s[8]=e("h2",{class:"text-2xl font-bold"},"لیست سفارشات درحال انجام",-1)),g.value.length==0?(i(),d("div",Xe," سفارش درحال انجامی وجود ندارد ")):(i(),d("div",Ye,[y(w,{onReloadList:s[4]||(s[4]=a=>x()),orders:g.value},null,8,["orders"])]))])):v("",!0),["#completed"].indexOf(f(_).hash)>-1?(i(),d("div",Ze,[s[9]||(s[9]=e("h2",{class:"text-2xl font-bold"},"لیست سفارشات تکمیل شده",-1)),n.value.length==0?(i(),d("div",et," سفارش تکمیل شده ای وجود ندارد ")):(i(),d("div",tt,[y(w,{orders:n.value,onReloadList:c,"custom-actions":[{title:"تکمیل شده",value:"completed"},{title:"تغییر به درحال پردازش",value:"processing"}],onChangeOrderStatus:s[5]||(s[5]=a=>t.changeOrderStatus(a))},null,8,["orders"])]))])):v("",!0),["#canceled"].indexOf(f(_).hash)>-1?(i(),d("div",st,[s[10]||(s[10]=e("h2",{class:"text-2xl font-bold"},"لیست سفارشات کنسل شده",-1)),n.value.length==0?(i(),d("div",ot," سفارش کنسل شده ای وجود ندارد ")):(i(),d("div",lt,[y(w,{orders:n.value,onReloadList:c,"custom-actions":[{title:"تکمیل شده",value:"completed"},{title:"تغییر به درحال آماده سازی",value:"procuring"}],onChangeOrderStatus:s[6]||(s[6]=a=>t.changeOrderStatus(a))},null,8,["orders"])]))])):v("",!0)]))}};export{dt as default};
