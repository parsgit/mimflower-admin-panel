import{c as u,o as i,a as e,t as x,q as K,_ as E,s as L,r as h,x as Z,F as D,d as M,n as R,y as A,g as B,z as H,P as O,B as J,p as Q,h as W,j as r,k as $,e as X,l as Y,w as _,m as C,C as U,D as ee,v as N,E as te,u as le,A as se,G as F}from"./index-kxEA9KR0.js";import{_ as S}from"./MyInput-BfC2OgjH.js";import{_ as q,a as T,I as oe,b as ae}from"./IconTrash-CfkylsD0.js";const ne={class:"container mx-auto p-6 bg-base-200 rounded-xl"},ie={class:"text-3xl text-base-content font-bold"},de={class:"mt-10"},j={__name:"ContentCard",props:{title:String},setup(m){const c=m;return(f,o)=>(i(),u("div",ne,[e("h2",ie,x(c.title),1),e("div",de,[K(f.$slots,"default",{class:"mt-10"})])]))}},ue={},re={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function ce(m,c){return i(),u("svg",re,c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]))}const pe=E(ue,[["render",ce]]),me={class:"breadcrumbs text-sm p-4 font-bold"},ve=["onClick"],_e={key:1},fe={class:"flex flex-col gap-4"},be={class:"flex gap-4 sm:gap-8 items-center"},ge={class:"text-xl font-bold"},xe={class:"text-lg font-bold"},he={class:"flex gap-2 items-center"},ke=["onClick"],ye={__name:"CategorySelector",props:L({selectMode:{default:!1},btnOpen:{default:!1},btnSelect:{default:!1},btnDelete:{default:!1},btnDefault:{default:!0}},{modelValue:{},modelModifiers:{}}),emits:L(["select","open","edit","delete"],["update:modelValue"]),setup(m,{expose:c,emit:f}){const o=h([]),b=h([]),d=h(0),p=h([]),k=f,v=Z(m,"modelValue"),g=m;g.btnDefault==!1?(p.value=[],g.btnSelect&&p.value.push({title:"Select",id:"select",class:"btn-info"}),g.btnOpen&&p.value.push({title:"Open",id:"open",class:"btn-info"}),g.btnDelete&&p.value.push({title:"Delete",id:"delete",class:"btn-error"})):p.value=[{title:"Open",id:"open",class:"btn-info"},{title:"Edit",id:"edit"},{title:"Delete",id:"delete",class:"btn-error"}];const P=(t,a)=>{a.id=="edit"?k("edit",t):a.id=="open"?(k("open",t),V(t)):a.id=="select"?(k("select",t),v.value=t.id):a.id=="delete"&&k("delete",t)},V=(t,a)=>{d.value=t.id,w()},w=(t="parent")=>{let a={};t=="parent"?a={parent:d.value}:a={id:v.value},console.log("getCategorylistByParent",a),O("category/list-by-parent",a).then(s=>{s.ok&&(o.value=s.list,b.value=s.tree)})},n=t=>v.value==t.id?"bg-teal-100":"";return c({loadById:t=>{v.value=t,H(()=>{w("id")})},loadMain:()=>{d.value=0,w()}}),(t,a)=>(i(),u("div",null,[e("div",null,[e("div",me,[e("ul",null,[e("li",null,[e("a",{onClick:a[0]||(a[0]=s=>V({id:0}))},"Main")]),(i(!0),u(D,null,M(b.value,(s,I)=>(i(),u("li",{key:s.id},[I+1<b.value.length?(i(),u("a",{key:0,onClick:y=>V(s)},x(s.title),9,ve)):(i(),u("span",_e,x(s.title),1))]))),128))])])]),e("div",fe,[(i(!0),u(D,null,M(o.value,(s,I)=>(i(),u("div",{key:I,class:R([[n(s)],"flex gap-4 justify-between bg-base-100 rounded-xl p-4 shadow"])},[e("div",be,[e("div",ge,x(s.title),1),e("div",xe,x(s.link),1)]),e("div",he,[s.id==v.value?(i(),A(pe,{key:0,class:"text-green-500 size-10"})):B("",!0),(i(!0),u(D,null,M(p.value,(y,G)=>(i(),u("button",{onClick:nt=>P(s,y),class:R(["btn btn-outline",y==null?void 0:y.class]),key:G},x(y.title),11,ke))),128))])],2))),128))])]))}},Ve={},we={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function Ce(m,c){return i(),u("svg",we,c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)]))}const $e=E(Ve,[["render",Ce]]),Ue={},Se={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function De(m,c){return i(),u("svg",Se,c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))}const Me=E(Ue,[["render",De]]),Be={class:"flex flex-wrap gap-4"},Pe={class:"flex-1"},Ie={class:"mb-4"},Te={class:"mb-4"},je={class:"border bg-black/10 p-2 rounded-xl"},Ae={class:"mb-4"},Oe={class:"flex items-center justify-between"},Ee={key:0,class:"p-4"},ze={key:1,class:"w-full"},Le={class:"flex flex-wrap items-center gap-2 bg-gray-100 rounded-t-xl p-2 w-full"},Re=["onUpdate:modelValue"],Ne=["onUpdate:modelValue"],Fe=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],Ge=["onUpdate:modelValue"],Ke={class:"flex flex-col 2xl:flex-row items-start gap-4 justify-between w-full mt-4 p-2 lg:p-4"},Ze=["onUpdate:modelValue"],He={class:"flex items-center gap-2 mt-4 bg-gray-100 rounded-b-xl p-2"},Je=["onClick","disabled"],Qe=["onClick","disabled"],We=["onClick"],Xe={class:"flex gap-4 mt-6 flex justify-center"},Ye={class:"mb-4"},et={class:"mb-4"},tt={class:"mb-4"},lt={for:""},st=["checked"],ot={class:"flex items-center justify-between mt-16"},at={class:"flex items-center gap-4 md:gap-8"},rt={__name:"AdminPostManageView",setup(m){const c=X(),f=W(),o=h({}),b=h(null),d=h([]);J(()=>o.value.title,(n,l)=>{o.value.link=o.value.title.replaceAll(" ","-").toLowerCase()});const p=n=>{const l=new Date().getTime();d.value.push({id:l,type:n})},k=()=>{o.value.contents=d.value,O("post/save",{post:o.value}).then(n=>{n.ok?F({text:"Success",icon:"success"}).then(async()=>{await c.replace({name:"admin_post_edit",params:{id:n.post_id}}),v()}):F({text:n.message,icon:"error"})})},v=()=>{const n=f.params.id;O("post/info",{id:n}).then(l=>{l.ok&&(o.value=l.post,d.value=l.post.contents,b.value.loadById(o.value.category_id))})},g=()=>({api_token:se.getApiToken()}),P=n=>{n>0&&([d.value[n],d.value[n-1]]=[d.value[n-1],d.value[n]])},V=n=>{n<d.value.length-1&&([d.value[n],d.value[n+1]]=[d.value[n+1],d.value[n]])},w=n=>{d.value.splice(n,1)};return Q(()=>{f.name=="admin_post_edit"?v():b.value.loadMain()}),(n,l)=>{const z=Y("router-link");return i(),u("div",null,[r(j,{title:"Create New Post"},{default:$(()=>[e("div",Be,[e("div",Pe,[e("div",Ie,[r(S,{modelValue:o.value.title,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value.title=t),title:"Title","title-class":"font-bold text-base-content text-xl","input-class":"input-primary"},null,8,["modelValue"])]),e("div",Te,[r(S,{modelValue:o.value.link,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.link=t),title:"Link","title-class":"font-bold text-base-content text-xl","input-class":"input-primary"},null,8,["modelValue"])]),e("div",je,[l[10]||(l[10]=e("div",null,[e("h3",{class:"text-xl font-bold"},"Select Category")],-1)),r(ye,{ref_key:"categoryComponent",ref:b,"btn-default":!1,"select-mode":!1,"btn-open":!0,"btn-select":!0,modelValue:o.value.category_id,"onUpdate:modelValue":l[2]||(l[2]=t=>o.value.category_id=t)},null,8,["modelValue"])])]),e("div",null,[r(q,{"upload-url":"admin/post/upload-image","upload-params":g(),title:"Featured photo",class:"w-72",modelValue:o.value.image,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.image=t)},null,8,["upload-params","modelValue"])])])]),_:1}),r(j,{title:"Content",class:"mt-8"},{default:$(()=>[e("div",Ae,[(i(!0),u(D,null,M(d.value,(t,a)=>(i(),u("div",{key:t.id,class:"mb-4 bg-white shadow-md rounded-xl"},[e("div",Oe,[t.type=="richbox"?(i(),u("div",Ee,[r(T,{title:"Text Content","com-id":t.id,modelValue:t.content,"onUpdate:modelValue":s=>t.content=s},null,8,["com-id","modelValue","onUpdate:modelValue"])])):t.type=="image"?(i(),u("div",ze,[e("div",Le,[e("div",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":s=>t.active_left_content=s,class:"toggle toggle-success"},null,8,Re),[[U,t.active_left_content]]),l[11]||(l[11]=C(" Left Description "))]),e("div",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":s=>t.active_right_content=s,class:"toggle toggle-success"},null,8,Ne),[[U,t.active_right_content]]),l[12]||(l[12]=C(" Right Description "))]),e("div",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":s=>t.items_center=s,class:"toggle toggle-success"},null,8,Fe),[[U,t.items_center]]),l[13]||(l[13]=C(" Items Center "))]),e("div",null,[_(e("select",{"onUpdate:modelValue":s=>t.align=s,class:"select select-bordered"},l[14]||(l[14]=[e("option",{disabled:""},"Select align",-1),e("option",{value:"left"},"Left",-1),e("option",{value:"center"},"Center",-1),e("option",{value:"right"},"Right",-1)]),8,qe),[[ee,t.align]])]),e("div",null,[_(e("input",{"onUpdate:modelValue":s=>t.max_width=s,placeholder:"max width",type:"text",class:"input"},null,8,Ge),[[N,t.max_width]])])]),e("div",Ke,[e("div",null,[_(r(T,{"com-id":"el"+t.id,modelValue:t.left_content,"onUpdate:modelValue":s=>t.left_content=s,title:""},null,8,["com-id","modelValue","onUpdate:modelValue"]),[[te,t.active_left_content]])]),e("div",null,[_(e("input",{class:"input input-primary",placeholder:"Image alt","onUpdate:modelValue":s=>t.alt=s,type:"text"},null,8,Ze),[[N,t.alt]]),r(q,{id:"file_uploader"+a,"upload-url":"admin/post/upload-image","upload-params":g(),title:"Upload photo",class:"w-72 mt-2 min-w-[300px]",modelValue:t.image,"onUpdate:modelValue":s=>t.image=s,"max-w":"400"},null,8,["id","upload-params","modelValue","onUpdate:modelValue"])]),e("div",null,[t.active_right_content?(i(),A(T,{key:0,"com-id":"er"+t.id,modelValue:t.right_content,"onUpdate:modelValue":s=>t.right_content=s,title:"Right Description"},null,8,["com-id","modelValue","onUpdate:modelValue"])):B("",!0)])])])):B("",!0)]),e("div",He,[e("button",{onClick:s=>P(a),disabled:a===0,class:"btn btn-secondary btn-sm"},[r(Me,{class:"size-8"})],8,Je),e("button",{onClick:s=>V(a),disabled:a===d.value.length-1,class:"btn btn-secondary btn-sm"},[r($e,{class:"size-8"})],8,Qe),e("button",{onClick:s=>w(a),class:"btn btn-danger btn-sm"},[r(oe,{class:"size-6 text-red-500"})],8,We)])]))),128)),e("div",Xe,[e("button",{onClick:l[4]||(l[4]=t=>p("richbox")),class:"btn btn-secondary"},"Add Richbox"),e("button",{onClick:l[5]||(l[5]=t=>p("image")),class:"btn btn-secondary"},"Add Image")])])]),_:1}),r(j,{title:"SEO Fields",class:"mt-8"},{default:$(()=>{var t;return[e("div",Ye,[r(S,{modelValue:o.value.meta_title,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.meta_title=a),"title-class":"font-bold text-xl text-base-content ","input-class":"input-primary",title:"SEO Title"},null,8,["modelValue"])]),e("div",et,[r(ae,{modelValue:o.value.meta_description,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.meta_description=a),"title-class":"font-bold text-base-content text-xl","textarea-class":"textarea-primary",title:"SEO Description"},null,8,["modelValue"])]),e("div",tt,[r(S,{modelValue:o.value.meta_keywords,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.meta_keywords=a),"title-class":"font-bold text-base-content text-xl","input-class":"input-primary",title:"SEO Keywords"},null,8,["modelValue"])]),e("div",null,[e("label",lt,[_(e("input",{checked:o.value.published,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.published=a),type:"checkbox",class:"toggle toggle-success"},null,8,st),[[U,o.value.published]]),l[15]||(l[15]=C(" Published "))])]),e("div",ot,[e("div",at,[e("button",{onClick:k,class:"btn btn-primary px-12 btn-lg",type:"submit"},x(le(f).name=="admin_post_edit"?"Save post":"Create Post"),1),(t=o.value)!=null&&t.title?(i(),A(z,{key:0,class:"btn btn-secondary btn-lg",target:"_blank",to:{name:"post_view",params:{id:o.value.id,title:o.value.link}}},{default:$(()=>l[16]||(l[16]=[C("Preview")])),_:1},8,["to"])):B("",!0)])])]}),_:1})])}}};export{rt as default};
