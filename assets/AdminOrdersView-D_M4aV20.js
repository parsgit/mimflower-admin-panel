import{c as n,o as d,a as t,F as y,m as k,t as r,w as C,s as S,B as L,p as x,j as v,z as N,P as O,r as h,l as R,b as m,e as w,u as j}from"./index-CU0ijBE3.js";const A={dir:"rtl"},B={class:"mt-4 flex flex-col gap-6"},U={class:"flex flex-col md:flex-row justify-between"},M={class:"flex gap-4 lg:gap-8 lg:flex-row gap-4"},D={class:"font-bold p-1 rounded-lg"},F={class:"text-lg"},P={class:"font-bold p-1 rounded-lg"},T={class:"text-lg"},q={class:"text-lg"},z={class:"flex flex-col xs:flex-row justify-center md:justify-start items-center gap-4"},E={key:0,class:"flex-1 md:flex-none"},G=["onUpdate:modelValue","onChange"],H={key:1,class:""},I=["onUpdate:modelValue","onChange"],J=["value"],K={class:"flex flex-col gap-4 lg:gap-8 lg:flex-row gap-4"},Q={class:"font-bold p-1 rounded-xl"},W={dir:"ltr",class:"text-lg"},X={class:"font-bold p-1 rounded-xl"},Y={dir:"ltr",class:"text-lg"},Z={class:"font-bold p-1 rounded-xl"},tt={dir:"ltr",class:"text-lg"},et={key:0,class:"font-bold p-1 rounded-xl bg-gray-200"},st={dir:"ltr",class:"text-lg"},ot={class:"mt-4"},lt={class:"col-span-14 lg:col-span-8 flex gap-2 flex-col gap-2"},nt={class:"font-bold text-xl"},$={__name:"OrderList",props:{orders:{required:!0},customActions:{default:[]}},emits:["changeOrderStatus","reloadList"],setup(f,{emit:b}){const i=f,c=b,p=(u,e)=>{N({title:"تغییر وضعیت سفارش",text:"آیا از تغییر وضعیت این سفارش اطمینان دارید؟",icon:"warning",buttons:{cancel:"خیر/انصراف",ok:{text:"بله",value:!0}},dangerMode:!0}).then(s=>{s&&g(u,e)})},g=(u,e)=>{O("admin/orders/change-status",{order_id:u,order_status:e}).then(s=>{s.ok&&c("reloadList")})};return(u,e)=>(d(),n("div",A,[t("div",B,[(d(!0),n(y,null,k(f.orders,s=>{var _,a,o;return d(),n("div",{key:s.id,class:"shadow shadow-md shadow-green-200 bg-gray-100 border-2 border-gray-400 rounded-md p-2"},[t("div",U,[t("div",M,[t("div",D,[e[0]||(e[0]=t("span",null,"شناسه :",-1)),t("span",F,r(s.id),1)]),t("div",P,[e[1]||(e[1]=t("span",null," توسط :",-1)),t("span",T,r(s.user.name),1),t("span",q,r((_=s==null?void 0:s.user)==null?void 0:_.last_name),1)])]),t("div",z,[((a=i==null?void 0:i.customActions)==null?void 0:a.length)===0?(d(),n("div",E,[C(t("select",{class:"select select-primary","onUpdate:modelValue":l=>s.order_status=l,onChange:l=>p(s.id,s.order_status)},e[2]||(e[2]=[L('<option value="processing">در حال پردازش</option><option value="procuring">درحال آماده سازی</option><option value="ready_to_ship">آماده ارسال</option><option value="shipped">ارسال شده</option><option value="completed">تکمیل شده</option>',5)]),40,G),[[S,s.order_status]])])):(d(),n("div",H,[C(t("select",{class:"select select-primary w-full","onUpdate:modelValue":l=>s.order_status=l,onChange:l=>p(s.id,s.order_status)},[(d(!0),n(y,null,k(i.customActions,(l,V)=>(d(),n("option",{key:V,value:l.value},r(l.title),9,J))),128))],40,I),[[S,s.order_status]])])),e[3]||(e[3]=t("div",{class:""},[t("button",{class:"btn btn-primary w-full"},"اطلاعات سفارش دهنده")],-1)),e[4]||(e[4]=t("div",{class:""},[t("button",{class:"btn btn-primary w-full"},"اطلاعات پرداخت")],-1))])]),t("div",K,[t("div",Q,[e[5]||(e[5]=v("تاریخ ثبت : ")),t("span",W,r(s.fa_created_at),1)]),t("div",X,[e[6]||(e[6]=v("تاریخ پرداخت : ")),t("span",Y,r(s.fa_payment_date),1)]),t("div",Z,[e[7]||(e[7]=t("b",null,"پرداخت شده : ",-1)),t("span",tt,r(s.cost)+" تومان",1)]),((o=s==null?void 0:s.completed_at)==null?void 0:o.length)>5?(d(),n("div",et,[e[8]||(e[8]=v("تاریخ تکمیل : ")),t("span",st,r(s.completed_at),1)])):x("",!0)]),t("div",ot,[e[10]||(e[10]=t("div",{class:"font-bold text-green-800"},"لیست سفارشات:",-1)),t("div",lt,[(d(!0),n(y,null,k(s.cart_list,l=>(d(),n("div",{class:"border-2 border-green-800/50 border-dashed bg-gray-50 p-2 rounded-xl text-lg font-bold",key:l.id},[v("🛒 "+r(l.product_title)+" - "+r(l.inventory_name)+" (تعداد : ",1),t("span",nt,r(l.count),1),e[9]||(e[9]=v(" ) "))]))),128))])])])}),128))])]))}},dt={class:""},at={dir:"rtl"},it={class:"tabs tabs-box w-fit"},rt=["checked"],ut=["checked"],ct={key:0,class:"bg-gray-200 p-4 rounded shadow shadow-md text-right mt-8"},pt={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},gt={key:1,dir:"rtl"},_t={key:1,class:"bg-gray-100 p-4 rounded shadow shadow-md text-right mt-10"},vt={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},mt={key:1},ht={key:2,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-8"},xt={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},ft={key:1,dir:"rtl"},yt={__name:"AdminOrdersView",setup(f){const b=j(),i=R(),c=h([]),p=h([]),g=h([]),u=h([]),e=()=>{O("admin/orders/active-list",{}).then(a=>{a.ok&&(c.value=a.list,console.log(c.value),g.value=c.value.filter(o=>o.order_status=="new"),p.value=c.value.filter(o=>o.order_status!="new"&&o.order_status!="completed"))})},s=()=>{O("admin/orders/completed-list",{}).then(a=>{a.ok&&(u.value=a.list,console.log(u.value))})},_=a=>{b.replace({hash:a}),a=="#completed"?s():e()};return i.hash=="#completed"?s():e(),(a,o)=>(d(),n("div",dt,[t("div",at,[t("div",it,[t("input",{onClick:o[0]||(o[0]=l=>_("#processing")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"درحال انجام",checked:["","#processing"].indexOf(m(i).hash)>-1},null,8,rt),t("input",{onClick:o[1]||(o[1]=l=>_("#completed")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"انجام شده‌ها",checked:["#completed"].indexOf(m(i).hash)>-1},null,8,ut)])]),["#processing",""].indexOf(m(i).hash)>-1?(d(),n("div",ct,[o[5]||(o[5]=t("h2",{class:"text-2xl font-bold"},"لیست سفارشات جدید",-1)),g.value.length==0?(d(),n("div",pt," سفارش جدیدی وجود ندارد ")):(d(),n("div",gt,[w($,{orders:g.value,onReloadList:e,"custom-actions":[{title:"جدید",value:"new"},{title:"تغییر به درحال انجام",value:"processing"}],onChangeOrderStatus:o[2]||(o[2]=l=>a.changeOrderStatus(l))},null,8,["orders"])]))])):x("",!0),["#processing",""].indexOf(m(i).hash)>-1?(d(),n("div",_t,[o[6]||(o[6]=t("h2",{class:"text-2xl font-bold"},"لیست سفارشات درحال انجام",-1)),p.value.length==0?(d(),n("div",vt," سفارش درحال انجامی وجود ندارد ")):(d(),n("div",mt,[w($,{onReloadList:o[3]||(o[3]=l=>e()),orders:p.value},null,8,["orders"])]))])):x("",!0),["#completed"].indexOf(m(i).hash)>-1?(d(),n("div",ht,[o[7]||(o[7]=t("h2",{class:"text-2xl font-bold"},"لیست سفارشات تکمیل شده",-1)),u.value.length==0?(d(),n("div",xt," سفارش تکمیل شده ای وجود ندارد ")):(d(),n("div",ft,[w($,{orders:u.value,onReloadList:s,"custom-actions":[{title:"تکمیل شده",value:"completed"},{title:"تغییر به درحال آماده سازی",value:"procuring"}],onChangeOrderStatus:o[4]||(o[4]=l=>a.changeOrderStatus(l))},null,8,["orders"])]))])):x("",!0)]))}};export{yt as default};
