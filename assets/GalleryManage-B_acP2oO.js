import{r as m,i as g,m as y,c as i,a as o,b as v,d as V,f as s,P as u,u as b,o as p}from"./index-FWLG_pKX.js";import{_ as x}from"./MyInput-D2NtpuR1.js";import{_ as k}from"./FileUploader-DgiX-U0X.js";import{_ as w}from"./Textarea-Cib_s86U.js";import{_ as B}from"./CategorySelector-Cs1q6-sC.js";const N={dir:"rtl",class:"max-w-[1200px] mx-auto"},U={key:0,class:"text-2xl font-bold"},$={class:"flex flex-col gap-4 mt-10 bg-white shadow rounded-xl p-2 lg:p-4"},C={class:"mt-4"},h={__name:"GalleryManage",setup(P){const n=y(),f=b(),d=m(null),e=m({}),c=a=>{a.ok&&(e.value.image=a.path)},_=()=>{u("admin/gallery/save",{...e.value}).then(async a=>{a.ok&&(swal("تصویر ذخیره شد","","success"),n.name=="admin_gallery_new"&&(await f.replace({name:"admin_gallery_edit",params:{id:a.gallery.id}}),r()))})},r=()=>{u("admin/gallery/info",{id:n.params.id}).then(a=>{a.ok&&(e.value=a.gallery)})};return g(()=>{n.name=="admin_gallery_edit"&&r(),d.value.loadByParent(8)}),(a,l)=>(p(),i("div",N,[o("div",null,[V(n).name=="admin_gallery_new"?(p(),i("h1",U,"افزودن تصویر")):v("",!0)]),o("div",$,[s(x,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.title=t),title:"عنوان تصویر"},null,8,["modelValue"]),s(k,{modelValue:e.value.image,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.image=t),"upload-url":"admin/upload-image/gallery",onComplete:c,dir:"ltr"},null,8,["modelValue"]),s(w,{modelValue:e.value.caption,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.caption=t),title:"توضیح کوتاه"},null,8,["modelValue"]),o("div",C,[l[4]||(l[4]=o("div",{dir:"auto"},"انتخاب دسته بندی",-1)),s(B,{ref_key:"categoryDom",ref:d,modelValue:e.value.category_id,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.category_id=t),"btn-default":!1,"btn-select":!0,"btn-open":!0,"btn-delete":!1,"btn-ed":a.btnEd,"select-mode":!0,class:"bg-gray-200 p-4 rounded-xl mt-2",dir:"ltr"},null,8,["modelValue","btn-ed"])]),o("div",{class:"mt-10 text-center"},[o("button",{onClick:_,class:"btn btn-primary"},"ذخیره تصویر")])])]))}};export{h as default};
