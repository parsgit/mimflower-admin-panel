import{_ as O,c as n,o as s,a as o,D as C,r as k,E as T,p as B,F as b,m as x,t as c,n as w,y as E,P as M,H as I}from"./index-7mp7ylXg.js";const L={},j={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function z(m,u){return s(),n("svg",j,u[0]||(u[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]))}const F=O(L,[["render",z]]),N={key:0},A={class:"breadcrumbs text-sm p-4 font-bold"},H=["onClick"],Z={key:1},q={class:"flex flex-col gap-4 mt-2"},G={class:"flex gap-4 sm:gap-8 items-center"},J={class:"text-xl font-bold"},K={class:"text-lg font-bold"},Q={class:"flex gap-2 items-center"},R=["onClick"],te={__name:"CategorySelector",props:C({selectMode:{default:!1},btnOpen:{default:!1},btnSelect:{default:!1},btnDelete:{default:!1},btnDefault:{default:!0},showTree:{default:!0}},{modelValue:{},modelModifiers:{}}),emits:C(["select","open","edit","delete"],["update:modelValue"]),setup(m,{expose:u,emit:D}){const h=k([]),f=k([]),p=k(0),a=k([]),v=D,d=T(m,"modelValue"),r=m;r.btnDefault==!1?(a.value=[],r.btnSelect&&a.value.push({title:"Select",id:"select",class:"btn-info"}),r.btnOpen&&a.value.push({title:"Open",id:"open",class:"btn-info"}),r.btnDelete&&a.value.push({title:"Delete",id:"delete",class:"btn-error"})):a.value=[{title:"Open",id:"open",class:"btn-info"},{title:"Edit",id:"edit"},{title:"Delete",id:"delete",class:"btn-error"}];const P=(e,l)=>{l.id=="edit"?v("edit",e):l.id=="open"?(v("open",e),g(e)):l.id=="select"?(v("select",e),d.value=e.id):l.id=="delete"&&v("delete",e)},g=(e,l)=>{p.value=e.id,_()},_=(e="parent")=>{let l={};e=="parent"?l={parent:p.value}:l={id:d.value},console.log("getCategorylistByParent",l),M("category/list-by-parent",l).then(t=>{t.ok&&(h.value=t.list,f.value=t.tree)})},S=(e,l=!0)=>{M("category/list-by-link",{tree:l,link:e}).then(t=>{t.ok&&(h.value=t.list,f.value=t.tree)})},V=e=>d.value==e.id?"bg-teal-100":"";return u({loadById:e=>{d.value=e,I(()=>{_("id")})},loadMain:()=>{p.value=0,_()},loadByParent:e=>{p.value=e,_()},loadByLink:S}),(e,l)=>(s(),n("div",null,[r.showTree?(s(),n("div",N,[o("div",A,[o("ul",null,[o("li",null,[o("a",{onClick:l[0]||(l[0]=t=>g({id:0}))},"Main")]),(s(!0),n(b,null,x(f.value,(t,y)=>(s(),n("li",{key:t.id},[y+1<f.value.length?(s(),n("a",{key:0,onClick:i=>g(t)},c(t.title),9,H)):(s(),n("span",Z,c(t.title),1))]))),128))])])])):B("",!0),o("div",q,[(s(!0),n(b,null,x(h.value,(t,y)=>(s(),n("div",{key:y,class:w([[V(t)],"flex gap-4 justify-between bg-base-100 rounded-xl p-4 shadow"])},[o("div",G,[o("div",J,c(t.title),1),o("div",K,c(t.link),1)]),o("div",Q,[t.id==d.value?(s(),E(F,{key:0,class:"text-green-500 size-10"})):B("",!0),(s(!0),n(b,null,x(a.value,(i,$)=>(s(),n("button",{onClick:Y=>P(t,i),class:w(["btn btn-outline",i==null?void 0:i.class]),key:$},c(i.title),11,R))),128))])],2))),128))])]))}};export{te as _};
