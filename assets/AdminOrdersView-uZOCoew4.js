import{c as l,o as n,a as o,F as y,h as k,i as C,j as m,k as h,t as c,w as S,l as V,s as L,P as O,r as x,m as N,b as _,e as w,u as R}from"./index-BBiOl5C-.js";const A={dir:"rtl"},U={class:"mt-4 flex flex-col gap-6"},B={class:"flex flex-col gap-4 lg:gap-8 lg:flex-row gap-4"},M={class:"font-bold p-1 rounded-lg bg-gray-200"},D={class:"text-lg"},F={class:"font-bold p-1 rounded-xl bg-gray-200"},P={dir:"ltr",class:"text-lg"},T={key:0,class:"font-bold p-1 rounded-xl bg-gray-200"},j={dir:"ltr",class:"text-lg"},q={class:"grid grid-cols-14 gap-1 items-start mt-4"},E={class:"hidden lg:block col-span-1 font-bold text-xl text-center"},z={class:"col-span-14 lg:col-span-8 flex gap-2 flex-col gap-2"},G={class:"font-bold text-xl"},H={class:"col-span-8 lg:col-span-3 font-bold text-xl flex flex-col items-end"},I={key:0,class:"w-full"},J=["onUpdate:modelValue","onChange"],K={key:1,class:"w-full"},Q=["onUpdate:modelValue","onChange"],W=["value"],$={__name:"OrderList",props:{orders:{required:!0},customActions:{default:[]}},emits:["changeOrderStatus","reloadList"],setup(f,{emit:b}){const a=f,u=b,p=(i,s)=>{L({title:"تغییر وضعیت سفارش",text:"آیا از تغییر وضعیت این سفارش اطمینان دارید؟",icon:"warning",buttons:{cancel:"خیر/انصراف",ok:{text:"بله",value:!0}},dangerMode:!0}).then(e=>{e&&g(i,s)})},g=(i,s)=>{O("admin/orders/change-status",{order_id:i,order_status:s}).then(e=>{e.ok&&u("reloadList")})};return(i,s)=>(n(),l("div",A,[o("div",U,[(n(!0),l(y,null,k(f.orders,e=>{var v,d;return n(),l("div",{key:e.id,class:"shadow shadow-md shadow-gray-300 bg-gray-100 border-2 border-gray-400 rounded-xl p-2"},[o("div",B,[o("div",M,[s[0]||(s[0]=h("سفارش توسط : ")),o("span",D,c(e.user.name),1)]),o("div",F,[s[1]||(s[1]=h("تاریخ ثبت : ")),o("span",P,c(e.fa_created_at),1)]),((v=e==null?void 0:e.completed_at)==null?void 0:v.length)>5?(n(),l("div",T,[s[2]||(s[2]=h("تاریخ تکمیل : ")),o("span",j,c(e.completed_at),1)])):m("",!0)]),s[6]||(s[6]=C('<div class="hidden lg:grid grid-cols-14 mt-4 text-xl"><div class="col-span-1 text-center">شناسه</div><div class="col-span-14 lg:col-span-8">محصولات</div><div class="col-span-6 lg:col-span-2 text-center">آدرس و اطلاعات</div><div class="col-span-8 lg:col-span-3">وضعیت سفارش</div></div>',1)),o("div",q,[o("div",E,c(e.id),1),o("div",z,[(n(!0),l(y,null,k(e.cart_list,t=>(n(),l("div",{class:"border-2 border-dashed bg-gray-50 p-2 rounded-xl text-lg font-bold",key:t.id},[h(c(t.product_title)+" - "+c(t.inventory_name)+" (تعداد : ",1),o("span",G,c(t.count),1),s[3]||(s[3]=h(" ) "))]))),128))]),s[5]||(s[5]=o("div",{class:"col-span-6 lg:col-span-2 text-center"},[o("button",{class:"btn btn-primary w-full"},"مشاهده اطلاعات")],-1)),o("div",H,[((d=a==null?void 0:a.customActions)==null?void 0:d.length)===0?(n(),l("div",I,[S(o("select",{class:"select select-primary","onUpdate:modelValue":t=>e.order_status=t,onChange:t=>p(e.id,e.order_status)},s[4]||(s[4]=[C('<option value="processing">در حال پردازش</option><option value="procuring">درحال آماده سازی</option><option value="ready_to_ship">آماده ارسال</option><option value="shipped">ارسال شده</option><option value="completed">تکمیل شده</option>',5)]),40,J),[[V,e.order_status]])])):(n(),l("div",K,[S(o("select",{class:"select select-primary w-full","onUpdate:modelValue":t=>e.order_status=t,onChange:t=>p(e.id,e.order_status)},[(n(!0),l(y,null,k(a.customActions,(t,r)=>(n(),l("option",{key:r,value:t.value},c(t.title),9,W))),128))],40,Q),[[V,e.order_status]])]))])])])}),128))])]))}},X={dir:"rtl"},Y={class:"tabs tabs-box w-fit"},Z=["checked"],tt=["checked"],et={key:0,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-8"},st={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},ot={key:1,dir:"rtl"},lt={key:1,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-10"},nt={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},dt={key:1},at={key:2,class:"bg-gray-100 p-4 rounded-xl shadow shadow-md text-right mt-8"},it={key:0,class:"mt-10 border-4 border-dashed rounded-2xl py-10 text-center font-bold text-2xl"},rt={key:1,dir:"rtl"},ut={__name:"AdminOrdersView",setup(f){const b=R(),a=N(),u=x([]),p=x([]),g=x([]),i=x([]),s=()=>{O("admin/orders/active-list",{}).then(d=>{d.ok&&(u.value=d.list,console.log(u.value),g.value=u.value.filter(t=>t.order_status=="new"),p.value=u.value.filter(t=>t.order_status!="new"&&t.order_status!="completed"))})},e=()=>{O("admin/orders/completed-list",{}).then(d=>{d.ok&&(i.value=d.list,console.log(i.value))})},v=d=>{b.replace({hash:d}),d=="#completed"?e():s()};return a.hash=="#processing"?s():e(),(d,t)=>(n(),l("div",null,[o("div",X,[o("div",Y,[o("input",{onClick:t[0]||(t[0]=r=>v("#processing")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"درحال انجام",checked:["","#processing"].indexOf(_(a).hash)>-1},null,8,Z),o("input",{onClick:t[1]||(t[1]=r=>v("#completed")),type:"radio",name:"my_tabs_1",class:"tab","aria-label":"انجام شده‌ها",checked:["#completed"].indexOf(_(a).hash)>-1},null,8,tt)])]),["#processing",""].indexOf(_(a).hash)>-1?(n(),l("div",et,[t[5]||(t[5]=o("h2",{class:"text-2xl font-bold"},"لیست سفارشات جدید",-1)),g.value.length==0?(n(),l("div",st," سفارش جدیدی وجود ندارد ")):(n(),l("div",ot,[w($,{orders:g.value,onReloadList:s,"custom-actions":[{title:"جدید",value:"new"},{title:"تغییر به درحال انجام",value:"processing"}],onChangeOrderStatus:t[2]||(t[2]=r=>d.changeOrderStatus(r))},null,8,["orders"])]))])):m("",!0),["#processing",""].indexOf(_(a).hash)>-1?(n(),l("div",lt,[t[6]||(t[6]=o("h2",{class:"text-2xl font-bold"},"لیست سفارشات درحال انجام",-1)),p.value.length==0?(n(),l("div",nt," سفارش درحال انجامی وجود ندارد ")):(n(),l("div",dt,[w($,{onReloadList:t[3]||(t[3]=r=>s()),orders:p.value},null,8,["orders"])]))])):m("",!0),["#completed"].indexOf(_(a).hash)>-1?(n(),l("div",at,[t[7]||(t[7]=o("h2",{class:"text-2xl font-bold"},"لیست سفارشات تکمیل شده",-1)),i.value.length==0?(n(),l("div",it," سفارش تکمیل شده ای وجود ندارد ")):(n(),l("div",rt,[w($,{orders:i.value,onReloadList:e,"custom-actions":[{title:"تکمیل شده",value:"completed"},{title:"تغییر به درحال آماده سازی",value:"procuring"}],onChangeOrderStatus:t[4]||(t[4]=r=>d.changeOrderStatus(r))},null,8,["orders"])]))])):m("",!0)]))}};export{ut as default};
