import{_ as b,c as s,o as t,a as n,D as B,r as i,E as I,k as L,p,t as w,w as f,y as M,L as S,x as g,v as N,e as U,A as W,U as j}from"./index-D6hGUued.js";const D={},E={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function P(a,r){return t(),s("svg",E,r[0]||(r[0]=[n("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"},null,-1)]))}const Z=b(D,[["render",P]]),z={},T={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function O(a,r){return t(),s("svg",T,r[0]||(r[0]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"},null,-1)]))}const H=b(z,[["render",O]]),J={},q={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function G(a,r){return t(),s("svg",q,r[0]||(r[0]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)]))}const K=b(J,[["render",G]]),Q={class:"flex flex-col items-center bg-base-300 p-4 rounded-xl shadow shadow-primary"},X={key:0,class:"text-lg font-bold"},Y={class:"mt-2"},ee={key:0},te=["src"],le=["src"],se={class:"flex items-center gap-1"},ae={key:0,class:"progress"},oe=["value"],ne={class:"flex gap-6 mt-2"},re=["accept"],ie={__name:"FileUploader",props:B({accept:{default:".png, .jpg"},modelResult:{default:"path"},btnTitle:{type:String,default:"Select Image"},maxW:{type:Number,default:200},title:{type:String,default:"Upload Image"},uploadUrl:{default:""},uploadParams:{default:{}},uploadBtn:{default:!0},imageBox:{default:!0}},{modelValue:{},modelModifiers:{}}),emits:B("change",["update:modelValue"]),setup(a,{emit:r}){const u=a,_=i(null),x=i(null),d=r,y=i(0),h=i(!1),V=i("image"),k=i(!1),l=I(a,"modelValue"),c=i(!1),$=e=>{k.value=!0;const o=e.target.files[0];if(["jpg","png"].indexOf(C(o.name))>-1){const v=new FileReader;v.readAsDataURL(o),v.onload=m=>{x.value=m.target.result}}d("change",o)},R=()=>{d("remove",l.value),x.value=null,k.value=!1,l.value=""},A=()=>{h.value=!0,j(u.uploadUrl,_.value.files[0],u.uploadParams,e=>{y.value=e,d("progress",e)},e=>{e=JSON.parse(e),h.value=!1,e.ok?(l.value=e[u.modelResult],console.log("model.value",e[u.modelResult],u.modelResult),d("complete",e)):d("error",e.message)},e=>{h.value=!1,d("error",e)})},C=e=>e.split(".").pop(),F=()=>W.server+l.value;return L(l,e=>{e!=null&&e.length&&(V.value=C(e))}),(e,o)=>{var v;return t(),s("div",Q,[n("div",null,[a.title?(t(),s("h3",X,w(a.title),1)):p("",!0)]),n("div",Y,[a.imageBox?(t(),s("div",ee,[x.value&&!l.value?(t(),s("img",{key:0,style:S(a.maxW?`max-width:${a.maxW}px`:""),class:"mx-auto w-full",src:x.value,alt:""},null,12,te)):(v=l.value)!=null&&v.length?(t(),s("img",{key:1,style:S(a.maxW?`max-width:${a.maxW}px`:""),class:"mx-auto w-full",src:F(),alt:""},null,12,le)):(t(),M(Z,{key:2,class:"text-primary w-full"}))])):p("",!0),n("div",se,[f(n("input",{onChange:$,type:"text",class:"input input-primary text-sm py-1 px-1 bg-gray-100/50 text-green-600/80","onUpdate:modelValue":o[0]||(o[0]=m=>l.value=m)},null,544),[[g,c.value],[N,l.value]]),f(n("p",{class:"p-1 text-sm py-1 px-1 bg-gray-100/20 text-green-600/80 flex-1"},w(l.value),513),[[g,c.value==!1]]),f(U(H,{onClick:o[1]||(o[1]=m=>c.value=!0),class:"bg-white rounded-xl size-8 p-1 cursor-pointer"},null,512),[[g,c.value==!1]]),f(U(K,{onClick:o[2]||(o[2]=m=>c.value=!1),class:"bg-white rounded-xl size-8 p-1 cursor-pointer"},null,512),[[g,c.value==!0]])]),f(n("div",null,[y.value==0?(t(),s("progress",ae)):(t(),s("progress",{key:1,class:"progress progress-primary",value:y.value,max:"100"},null,8,oe))],512),[[g,h.value]])]),n("div",ne,[n("input",{readonly:"",accept:u.accept,onChange:$,class:"hidden",ref_key:"input_file",ref:_,type:"file"},null,40,re),l.value?p("",!0):(t(),s("button",{key:0,onClick:o[3]||(o[3]=m=>_.value.click()),class:"btn btn-secondary"},w(u.btnTitle),1)),!l.value&&k.value?(t(),s("button",{key:1,onClick:A,class:"btn btn-primary"},"Upload")):p("",!0),l.value?(t(),s("button",{key:2,onClick:R,class:"btn btn-warning"},"Remove")):p("",!0)])])}}};export{ie as _};
