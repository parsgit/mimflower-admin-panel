import{_ as u}from"./MyInput-ldFGcZiJ.js";import{_ as V}from"./Richbox-Ce1LHX7M.js";import{_ as m}from"./FileUploader-By6psxI0.js";import{r as p,l as x,c as w,a as t,e as i,y as g,p as h,P as v,H as b,u as y,o as c}from"./index-DdwhkfvQ.js";const U={class:"container",dir:"rtl"},B={class:"mt-10 bg-gray-100 p-2 xl:p-4 rounded-xl max-w-4xl mx-auto flex flex-col gap-8"},$={dir:"ltr"},C={dir:"ltr"},N={dir:"ltr"},H={class:"text-center mt-10"},T={__name:"WorkshopManageView",setup(I){const e=p({}),s=x(),_=y(),n=p(null),k=a=>{e.value.image=a.path},f=()=>{v("admin/workshop/save",{...e.value}).then(async a=>{a.ok&&(s.name=="admin_workshop_new"&&await _.replace({name:"admin_workshop_edit",params:{id:a.workshop.id}}),swal("با موفقیت ذخیره شد","","success").then(()=>{d()}))})},d=()=>{v("admin/workshop/info",{id:s.params.id}).then(a=>{a.ok&&(e.value=a.workshop,b(()=>{console.log("next tick",e.value.description),n.value.setHtml(e.value.description)}))})};return s.name=="admin_workshop_edit"?d():e.value.description=" ",(a,o)=>{var r;return c(),w("div",U,[o[6]||(o[6]=t("h2",null,"ساخت/ویرایش ورکشاپ",-1)),t("div",B,[t("div",null,[i(u,{modelValue:e.value.title,"onUpdate:modelValue":o[0]||(o[0]=l=>e.value.title=l),title:"عنوان ورکشاپ"},null,8,["modelValue"])]),t("div",$,[(r=e.value)!=null&&r.description?(c(),g(V,{key:0,"com-id":"weditor",ref_key:"richbox",ref:n,modelValue:e.value.description,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.description=l),"title-class":"text-right",title:"توضیحات"},null,8,["modelValue"])):h("",!0)]),t("div",C,[i(m,{title:"آپلود عکس",modelValue:e.value.image,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.image=l),onComplete:k,"upload-url":"admin/upload-image/workshop"},null,8,["modelValue"])]),t("div",N,[i(m,{accept:".mp4",title:"آپلود ویدیو",modelValue:e.value.video,"onUpdate:modelValue":o[3]||(o[3]=l=>e.value.video=l),"upload-url":"admin/upload-file/workshop"},null,8,["modelValue"])]),t("div",null,[i(u,{modelValue:e.value.external_link,"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.external_link=l),title:"لینک خارجی"},null,8,["modelValue"])]),t("div",H,[t("button",{onClick:o[5]||(o[5]=l=>f()),class:"btn btn-primary"},"ذخیره ورکشاپ")])])])}}};export{T as default};
